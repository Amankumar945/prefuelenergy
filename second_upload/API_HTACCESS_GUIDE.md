# üîß API .htaccess File Guide

## ‚ö†Ô∏è IMPORTANT NOTE

The `.htaccess` file in your **API subdomain** (`api.sorsuvidhacloudsystems.com`) is **DIFFERENT** from the UI `.htaccess` file!

---

## üìç Two Different .htaccess Files

### **1. UI .htaccess** (Main Domain)
- **Location:** `public_html/.htaccess`
- **Purpose:** Handles client-side routing (fixes 404 errors)
- **Domain:** `https://sorsuvidhacloudsystems.com/`
- **THIS IS THE ONE WE CREATED** ‚úÖ

### **2. API .htaccess** (API Subdomain)
- **Location:** `api.sorsuvidhacloudsystems.com/.htaccess`
- **Purpose:** Node.js Passenger configuration
- **Domain:** `https://api.sorsuvidhacloudsystems.com/`
- **THIS IS THE ONE YOU SHARED** ‚úÖ

---

## üéØ Your API .htaccess File

The file you shared is **CORRECT** and is auto-generated by CloudLinux Passenger (MilesWeb's Node.js hosting system).

### **Current Content:**
```apache
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION BEGIN
PassengerAppRoot "/home/eogjftth/api.sorsuvidhacloudsystems.com/app"
PassengerBaseURI "/"
PassengerNodejs "/home/eogjftth/nodevenv/api.sorsuvidhacloudsystems.com/app/20/bin/node"
PassengerAppType node
PassengerStartupFile index.js
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION END

# DO NOT REMOVE OR MODIFY. CLOUDLINUX ENV VARS CONFIGURATION BEGIN
<IfModule Litespeed>
</IfModule>
# DO NOT REMOVE OR MODIFY. CLOUDLINUX ENV VARS CONFIGURATION END
```

**This is CORRECT!** ‚úÖ

**What it does:**
- Tells the server this is a Node.js application
- Points to your Node.js version and app location
- Sets the startup file to `index.js`

---

## ‚úÖ Recommended: Enhanced Version

I've created an **enhanced version** with additional security headers in the file:
- `API_htaccess.txt`

This version includes:
- All the original Passenger configuration (required)
- Additional CORS headers (optional - your server already handles CORS)
- Security headers for API

---

## üìã Should You Update It?

### **Option 1: Leave It As Is (RECOMMENDED)**
‚úÖ **Best choice** - Your current file is fine
‚úÖ Your server code already handles CORS properly
‚úÖ No changes needed

### **Option 2: Use Enhanced Version**
If you want additional server-level headers, use the enhanced version from `API_htaccess.txt`

**Benefits:**
- Backup CORS headers at server level
- Additional security headers
- Still includes all Passenger configuration

---

## üöÄ How to Update (If You Choose Option 2)

### **Step 1: Login to cPanel**
1. Go to your MilesWeb cPanel
2. Login with your credentials

### **Step 2: Navigate to API Folder**
1. Click **File Manager**
2. Navigate to: `api.sorsuvidhacloudsystems.com/`
3. You should see `.htaccess` file here

**If you don't see it:**
- Click **Settings** (top right)
- Enable ‚úÖ **"Show Hidden Files (dotfiles)"**
- Click Save

### **Step 3: Backup Current File**
1. Right-click `.htaccess`
2. Click **Copy**
3. Name it: `.htaccess.backup`
4. Click **Copy Files**

Now you have a backup! ‚úÖ

### **Step 4: Edit .htaccess**
1. Right-click `.htaccess`
2. Click **Edit**
3. **Delete all content**
4. Copy the content from `API_htaccess.txt`
5. **Paste** into the editor
6. Click **Save Changes**

### **Step 5: Restart Node.js App**
1. In cPanel, find **Setup Node.js App**
2. Click on your app (api.sorsuvidhacloudsystems.com)
3. Click **Restart**
4. Wait for green "Running" status

### **Step 6: Test**
1. Visit: `https://api.sorsuvidhacloudsystems.com/healthz`
2. Should return: `{"ok":true,"status":"healthy"}`
3. ‚úÖ If you see this, it's working!

---

## üîç What's in the Enhanced Version

### **1. Original Passenger Configuration (Required)**
```apache
PassengerAppRoot "/home/eogjftth/api.sorsuvidhacloudsystems.com/app"
PassengerBaseURI "/"
PassengerNodejs "/home/eogjftth/nodevenv/api.sorsuvidhacloudsystems.com/app/20/bin/node"
PassengerAppType node
PassengerStartupFile index.js
```
**What it does:** Tells server how to run your Node.js app

### **2. CORS Headers (Optional)**
```apache
Header always set Access-Control-Allow-Origin "*"
Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With"
Header always set Access-Control-Allow-Credentials "true"
```
**What it does:** Backup CORS at server level (your code already handles this)

### **3. Security Headers**
```apache
Header always set X-Content-Type-Options "nosniff"
Header always set X-Frame-Options "DENY"
Header always set X-XSS-Protection "1; mode=block"
```
**What it does:** Adds extra security protection

---

## ‚ö†Ô∏è CRITICAL NOTES

### **1. Never Remove Passenger Configuration**
The lines starting with:
```
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION
```
**MUST STAY!** If you remove them, your API will stop working.

### **2. Your API is Already Working**
If your API is currently working fine, **you don't need to change anything**.

The current `.htaccess` is sufficient!

### **3. CORS is Already Handled**
Your server code (`server/index.js`) already has:
```javascript
app.use(cors({
  origin: true,
  credentials: true,
  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
  allowedHeaders: ['Content-Type', 'Authorization', 'X-Requested-With']
}));
```
So additional CORS in `.htaccess` is optional.

---

## üéØ My Recommendation

### **For API .htaccess:**
‚úÖ **Keep it as is** - Your current file is correct and working

### **For UI .htaccess:**
‚úÖ **Update it** - Use the new `.htaccess` from `second_upload/ui/` folder

---

## üìã Summary

### **What You Shared:**
- API subdomain `.htaccess` file
- Located at: `api.sorsuvidhacloudsystems.com/.htaccess`
- Status: **CORRECT** ‚úÖ
- Action needed: **NONE** (unless you want enhanced version)

### **What You Need to Update:**
- **UI .htaccess** file (main domain)
- Located at: `public_html/.htaccess`
- File included in: `second_upload/ui/.htaccess`
- Action: **Upload this file** to fix 404 errors

---

## üîÑ Two Separate Deployments

### **Deployment 1: UI (Main Domain)** - Required ‚úÖ
**Location:** `public_html/`
**Files:** Everything from `second_upload/ui/`
**Purpose:** Fix responsive design, login form, and 404 errors

### **Deployment 2: API (Subdomain)** - Optional
**Location:** `api.sorsuvidhacloudsystems.com/`
**Files:** `.htaccess` (already correct)
**Purpose:** Already working, no changes needed

---

## ‚úÖ Final Answer

**For your API .htaccess file:**

**Option 1 (Recommended):**
‚úÖ **Keep it exactly as it is** - Don't change anything
‚úÖ It's correct and working

**Option 2 (Optional Enhancement):**
If you want extra security headers, use the content from `API_htaccess.txt`

**For your UI .htaccess file:**
‚úÖ **Upload the new one** from `second_upload/ui/.htaccess` to fix 404 errors

---

## üéä Conclusion

Your API `.htaccess` is **already correct**! 

Focus on updating the **UI files** (main domain) from the `second_upload/ui/` folder - that's where the important fixes are! üöÄ

